# Виртуальные машины на вычислительном кластере

Проект включает в себя основной сервис для управления виртуальными машинами и микросервис для оптимального выбора сервера для размещения виртуальных машин на кластере.

## Начало работы

Для запуска проекта у вас должен быть установлен [Docker](https://docs.docker.com/get-docker/) и [Docker Compose](https://docs.docker.com/compose/install/).

### Структура проекта

Проект состоит из двух основных директорий:

- `app/` - содержит код основного сервиса и соответствующий `Dockerfile`.
- `validate_app/` - содержит код микросервиса выбора сервера и соответствующий `Dockerfile`.

### Запуск проекта

1. Клонируйте репозиторий проекта на вашу локальную машину.
2. Перейдите в каталог проекта.
3. Запустите сервисы, используя Docker Compose:

   ```bash
   docker-compose up --build
   ```
   Флаг --build указывает Docker Compose построить образы перед запуском, что необходимо при первом запуске или после изменений в коде сервисов.

### Использование
После запуска сервисов вы можете обращаться к основному сервису для создания виртуальных машин.

### Создание виртуальной машины
Для создания виртуальной машины отправьте POST-запрос на /vm с JSON-телом, содержащим id, size и task:
```bash
curl -X POST http://localhost:9024/vm -H "Content-Type: application/json" -d '{"id": 1, "size": 4, "task": "example_task"}'
```
1. id - уникальный идентификатор виртуальной машины.
2. size - размер RAM в GB (должен быть степенью двойки и не превышать 128).
3. task - нагрузка (задание), которую будет выполнять виртуальная машина.

### Остановка проекта
Для остановки и удаления всех контейнеров проекта используйте следующую команду в каталоге проекта:
```bash
docker-compose down
```
